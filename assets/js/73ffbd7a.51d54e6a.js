"use strict";(self.webpackChunksailpoint_developer_portal=self.webpackChunksailpoint_developer_portal||[]).push([[49447],{497338:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var r=n(785893),i=n(511151);const s={id:"webservices-after-provisioning-rule",title:"Web Services After Operation Rule",pagination_label:"Web Services After Operation Rule",sidebar_label:"Web Services After Operation Rule",sidebar_class_name:"webServicesAfterOperationRule",keywords:["cloud","rules","webservices"],description:"This rule calculates attributes after a web-service operation call.",slug:"/extensibility/rules/connector-rules/webservices-after-provisioning-rule",tags:["Rules"]},a=void 0,o={id:"extensibility/rules/connector-rules/webservices-after-provisioning-rule",title:"Web Services After Operation Rule",description:"This rule calculates attributes after a web-service operation call.",source:"@site/docs/extensibility/rules/connector-rules/web_services_after_operation_rule.md",sourceDirName:"extensibility/rules/connector-rules",slug:"/extensibility/rules/connector-rules/webservices-after-provisioning-rule",permalink:"/docs/extensibility/rules/connector-rules/webservices-after-provisioning-rule",draft:!1,unlisted:!1,editUrl:"https://github.com/sailpoint-oss/developer-community-site/edit/main/docs/extensibility/rules/connector-rules/web_services_after_operation_rule.md",tags:[{inline:!0,label:"Rules",permalink:"/docs/tags/rules"}],version:"current",lastUpdatedBy:"GitHub Action Bot",lastUpdatedAt:1726169183e3,frontMatter:{id:"webservices-after-provisioning-rule",title:"Web Services After Operation Rule",pagination_label:"Web Services After Operation Rule",sidebar_label:"Web Services After Operation Rule",sidebar_class_name:"webServicesAfterOperationRule",keywords:["cloud","rules","webservices"],description:"This rule calculates attributes after a web-service operation call.",slug:"/extensibility/rules/connector-rules/webservices-after-provisioning-rule",tags:["Rules"]},sidebar:"openApiSidebar",previous:{title:"SAP HR Provisioning Modify Rule",permalink:"/docs/extensibility/rules/connector-rules/sap-provisioning-modify-rule"},next:{title:"Web Services Before Operation Rule",permalink:"/docs/extensibility/rules/connector-rules/webservices-before-provisioning-rule"}},l={},c=[{value:"Overview",id:"overview",level:2},{value:"Execution",id:"execution",level:2},{value:"Input",id:"input",level:2},{value:"Output",id:"output",level:2},{value:"Template",id:"template",level:2},{value:"Example",id:"example",level:2},{value:"Attach to Source",id:"attach-to-source",level:2}];function p(e){const t={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(t.p,{children:"This rule calculates attributes after a web-service operation call."}),"\n",(0,r.jsx)(t.h2,{id:"execution",children:"Execution"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Connector Execution"})," - This rule executes within the virtual appliance. It may offer special abilities to perform connector-related functions, and it may offer managed connections to sources."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Logging"})," - Logging statements are viewable within the ccg.log on the virtual appliance, and they are viewable by SailPoint personnel."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Rule Execution",src:n(288763).Z+"",width:"1525",height:"618"})}),"\n",(0,r.jsx)(t.h2,{id:"input",children:"Input"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Argument"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Purpose"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"application"}),(0,r.jsx)(t.td,{children:"sailpoint.object.Application"}),(0,r.jsx)(t.td,{children:"Application whose data file is being processed."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"processedResponseObject"}),(0,r.jsx)(t.td,{children:"List<Map<String, Object>>"}),(0,r.jsx)(t.td,{children:"List of map (account/group). The map contains a key, the identityAttribute of the application schema, and a value, all the account/group attributes (schema) passed by the connector after parsing the respective API response."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"requestEndPoint"}),(0,r.jsx)(t.td,{children:"sailpoint.connector.webservices.EndPoint"}),(0,r.jsx)(t.td,{children:"Current request information. It contains the header, body, context url, method type, response attribute map, successful response code."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"restClient"}),(0,r.jsx)(t.td,{children:"sailpoint.connector.webservices.WebServicesClient"}),(0,r.jsx)(t.td,{children:"WebServicesClient (HttpClient) object that enables the user to call the Web Services API target system."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"rawResponseObject"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"String object that holds the raw response returned from the target system, which can be in JSON or XML form."})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Argument"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Purpose"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"updatedAccountOrGroupList"}),(0,r.jsx)(t.td,{children:"java.util.Map"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:"Map"})," object returned from the After Operation Rule. It may contain any or all of the following: an updated list of account / group resource objects, identified by key ",(0,r.jsx)(t.code,{children:"data"}),"/ attribute values to be updated into application by the connector state map identified by key ",(0,r.jsx)(t.code,{children:"connectorStateMap"}),". Each resource (account/group) object is of type ",(0,r.jsx)(t.code,{children:"Map"}),", which contains the ",(0,r.jsx)(t.strong,{children:"key-value"})," pair. The ",(0,r.jsx)(t.strong,{children:"key"})," represents the schema attribute name, and the ",(0,r.jsx)(t.strong,{children:"value"})," represents the account/group attribute value."]})]})})]}),"\n",(0,r.jsx)(t.h2,{id:"template",children:"Template"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-xml",children:'<?xml version=\'1.0\' encoding=\'UTF-8\'?>\n<!DOCTYPE Rule PUBLIC "sailpoint.dtd" "sailpoint.dtd">\n<Rule name="Example Rule" type="WebServiceAfterOperationRule">\n  <Description>Describe your rule here.</Description>\n  <Source><![CDATA[\n\n  // Add your logic here.\n\n  ]]></Source>\n</Rule>\n'})}),"\n",(0,r.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'<?xml version=\'1.0\' encoding=\'UTF-8\'?>\n<!DOCTYPE Rule PUBLIC "sailpoint.dtd" "sailpoint.dtd">\n<Rule name="Example Rule" type="WebServiceAfterOperationRule">\n  <Description>This rule is used by the  Web Services connector after performing any operation like testconnection, aggregation etc.</Description>\n  <Source><![CDATA[\nimport connector.common.JsonUtil;\n    import java.util.HashMap;\n    import java.util.Map.Entry;\n    import java.util.Map;\n    import java.util.List;\n    import java.util.ArrayList;\n    import javax.net.ssl.HttpsURLConnection;\n    import java.io.BufferedReader;\n    import java.io.PrintStream;\n    import java.io.StringWriter;\n    import java.text.SimpleDateFormat;\n    import sailpoint.tools.GeneralException;\n\nMap updatedMapInfo = new HashMap();\nList list = new ArrayList();\nArrayList<String> Roles = new ArrayList<String>();\nMap response = (Map) JsonUtil.toMap(rawResponseObject);\nint RoleSize = 0;\nString newName;\nList Finallist = new ArrayList();\nList workspace = new ArrayList();\n\nlog.error("RULES response at start" + response);\nif (response.get("data") != null) {\n\n     list = (ArrayList) response.get("data");\n\n     for(int d = 0; d < list.size(); d++ ){\n\n         Map responseMap = (Map) list.get(d);\n\n         if (responseMap.get("attributes") != null) {\n            Map newmap = new HashMap();\n             Map data = (Map) responseMap.get("attributes");\n             newmap.put("firstName", data.get("firstName"));\n             newmap.put("lastName",data.get("lastName"));\n             newmap.put("displayName",data.get("displayName"));\n             newmap.put("userName",data.get("userName"));\n             newmap.put("email",data.get("email"));\n\n             if (data.get("workspaceMemberships") != null) {\n\n                 ArrayList Workspacedetail = (ArrayList) data.get("workspaceMemberships");\n\n                 for (int i = 0; i < Workspacedetail.size(); i++) {\n\n                     Map work = (Map) Workspacedetail.get(i);\n\n                     for (int w = 0; w < work.size(); w++) {\n\n                         if (work.get("workspaceName") != null) {\n\n                            workspace.add(work.get("workspaceName"));\n\n                             Roles = (ArrayList) work.get("workspaceRoles");\n\n                             for (int r = 0; r < Roles.size(); r++) {\n\n                                 if (Roles.get(r) != null) {\n                                     newName = Roles.get(r).toString() + " - " + work.get("workspaceName");\n\n                                     if(newName != null) {\n                                         Roles.set(r, newName);\n                                         newmap.put("workspaceRoles", Roles);\n\n                                     }\n\n                                 }\n                             }\n                         }\n                         break;\n                     }\n                 }\n             }\n\n             Finallist.add(newmap);\n\n         }\n    }\n\n}\nlog.error("RULES newmap at end" + newmap);\nlog.error("RULES Finallist at end" + Finallist);\n\nlog.error("RULES processedResponseObject Before is " + processedResponseObject);\n\nupdatedMapInfo.put("data", Finallist);\nlog.error("RULES updatedMapInfo is " + updatedMapInfo);\n\nreturn updatedMapInfo;\nlog.error("RULES processedResponseObject after is " + processedResponseObject);\u200b\n  ]]></Source>\n</Rule>\n'})}),"\n",(0,r.jsx)(t.h2,{id:"attach-to-source",children:"Attach to Source"}),"\n",(0,r.jsxs)(t.p,{children:["Refer to ",(0,r.jsx)(t.a,{href:"/docs/extensibility/rules/connector-rules#webserviceafteroperation-rule",children:"Attaching Connector-Related Rules to Sources"})," for details on how to attach your rule to your source."]})]})}function d(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},288763:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/connector_execution-da1c6db87e6d1b2b8d1f5398ce2f3501.png"}}]);